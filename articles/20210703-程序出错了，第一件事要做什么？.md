# 程序出错了，第一件事要做什么？

![](images-20210703/tyssul-patel-o-zOatT4kQw-unsplash-900.jpg)

> 题图：Photo by Tyssul Patel on Unsplash
>
> 本文原创发布于微信公众号“洛奇看世界”。

程序出错是码农工作中最常见的一件事，解决错误也就成了大部分程序员工作的日常。

比如，最新同步的代码代码编译出错了，代码移植到项目中运行失败了，或者系统启动过程中崩溃了，升级过程异常了……

对大部分码农来说，解决这些出现的问题，就是这个岗位存在的价值。

那么程序出错了，第一件事要做什么？

说说我自己吧，以前程序出错了。

大脑一片空白，六神无主，懵逼了。
本能的面对未知的恐惧：第一次搞这个功能，就是拿了别人代码编译，跑一跑，功能以前没搞过，代码也没看过。别人那里都好好的，在我这里不工作了，真是奇怪，咋搞？咋搞？咋搞？

第一反应，赶紧拿着错误信息度娘一下，看看有没有人遇到过。

- 运气好的时候，第一个就是想要的，问题顺利解决，愉快一整天。
- 运气不好的时候，百度翻了一百页，竟然没有一个类似问题，@#￥%……&\*

现在兴起各种微信学习交流群，碰巧刚好加了几个，那就把错误信息扔进去，顺便问一句，有大佬遇到过这个问题吗？心里期待有个熟悉的大佬帮忙看下，能解决问题最好，不能的话给个提示也不错。

- 碰巧有个哥们遇到过同样的情况，问题顺利解决，愉快一整天。
- 不巧扔出去半天都没人回应，平时群里那些整天瞎比比的人都干嘛去了@#￥%……&\*

当运气不好，还很不巧的时候，就开始瞎折腾：

- 再编译跑一次，看看结果会不会一样？不行的话，就再来一次，两次不行，再来三次……
- 要不又会想，是不是环境有问题，换个环境试试？

当度娘没有结果，微信群没有反应，换了个环境还有问题的时候，就只能硬着头皮，去看下到底是怎么回事。

仔细一看出错信息："/bin/sh: xxx: No such file or directory"？
WTF? 好像是说没有找到文件，进入目录一看，原来这个文件在 tools 目录下，路径不对，修改路径问题搞定。然后开始觉得自己好傻逼……竟然被这样的问题折腾了一整天。

这种问题，在我过去的工作经历中出现过很多次。因为每次出问题，都有一种面对未知的恐惧，想着通过各种不用思考的方式解决，有时候可以，但也有很多时候不行。

不仅是我，我支持过的客户，我认识的不少工程师，也有跟我类似的情况。

经历的次数多了，才发现，好多问题，虽然从来没有接触过，代码也没看过，但问题本身可能并没有那么难。

陌生的系统，陌生的功能，陌生的代码，但你遇到的错误可能并不陌生。比如内存不足，空间不够，权限缺失，文件不存在，参数不对等等。

出现问题的第一时间就详细检查错误信息，顺藤摸瓜，更有利于问题的解决。至于前面的各种度娘，微信群，各种尝试，应该是读完错误信息，没有解决问题的思路时，才应该采取的办法。

所以，遇到程序出错，第一件事就是详细检查 log，仔细阅读错误信息。这应该成为条件反射动作，包括：

1. 详细查看具体的错误信息；错误永远不会说谎，里面包含了最直接的原因，虽然可能不是根本原因，但是可以从这个出错开始，向上溯源，找到根源。

2. 浏览检查出错之前的 log；主要是查看在出错之前有什么异常，如果有正常的 log 就更好了，直接比较正常和异常的 log，能更快定位到异常开始的地方。

所以不熟悉系统，不熟悉代码，没有信心，认定自己搞不定，这些原因会导致不去认真阅读错误信息，不去检查 log。

看一遍 log，可能只需要花几分钟，即使不了解也没关系，大不了问题还是那样，但万一从这一检查开始，就一步一步把问题解决了呢？

如果错误信息很少，甚至没有，那就打开调试开关，让程序输出更多 log，或手动增加一些调试信息。

如果日志太大，大到没法查看的情况，比如几百 M，几个 G 的那种，这个时候神器 grep 就该出场了。通过 grep，搜索 err/error/fail 等相关字符串的上下文信息，相信这样操作有助于进一步分析解决问题。

如果不行，那再考虑换一个平台，换一个环境测试也不迟。

> 特别说明：
>
> 如果目的就是尽快解决问题，那通过搜索引擎或其它方式寻求帮助，和自己查看错误信息并着手调试解决问题，二者没有优劣之分。从这个目的出发，应该选择更快搞定问题的那个方式。
>
> 但如果希望在这一个个问题的背后，自己能够得到成长，则需要更多地训练自己解决问题的思路和办法。

所以，认真检查错误信息，我相信这就是硬刚，解决问题的开始……
